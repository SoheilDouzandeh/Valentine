<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ÙˆÙ„Ù†ØªØ§ÛŒÙ†</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900;1000&display=swap" rel="stylesheet">

<style>
:root{
  --bg1:#0b0b10;
  --bg2:#141425;
  --text:#ffffff;
  --yes:#19c37d;
  --no:#ff4d6d;
  --card:rgba(255,255,255,.07);
  --stroke:rgba(255,255,255,.18);
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{
  margin:0;
  font-family:"Vazirmatn",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--text);
  background:radial-gradient(1200px 800px at 50% -10%,#2a2a5a 0%,transparent 60%),
            linear-gradient(180deg,var(--bg1),var(--bg2));
  overflow:hidden;
}

.hearts{position:fixed;inset:0;pointer-events:none;z-index:0}
.heart{position:absolute;bottom:-60px;font-size:18px;animation:floatUp linear forwards;opacity:.9}
@keyframes floatUp{
  0%{opacity:0;transform:translateY(0)}
  10%{opacity:1}
  100%{opacity:0;transform:translateY(-120vh)}
}

.wrap{height:100%;display:flex;align-items:center;justify-content:center;padding:20px;position:relative;z-index:2}
.card{
  width:min(560px,92vw);
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:22px;
  padding:18px;
  text-align:center;
  position:relative;
  backdrop-filter: blur(10px);
  box-shadow: 0 25px 60px rgba(0,0,0,.35);
}

.title{
  font-weight:1000;
  font-size:clamp(28px,7vw,44px);
  line-height:1.15;
  margin:0;
}
.sub{margin:10px 0 0;font-weight:700;opacity:.9}

.photoWrap{
  margin-top:14px;
  border-radius:16px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.18);
  box-shadow: 0 18px 45px rgba(0,0,0,.35);
}
.photo{
  width:100%;
  display:block;
  filter: contrast(1.25) brightness(1.06) saturate(1.05);
}

.btnRow{
  margin-top:16px;
  position:relative;
  height:90px;
  display:flex;
  align-items:center;
  justify-content:center;
}

button{
  font-weight:1000;
  font-size:18px;
  padding:14px 22px;
  border:none;
  border-radius:16px;
  cursor:pointer;
  min-width:130px;
}

#yesBtn{
  background:linear-gradient(180deg,#2be39a,var(--yes));
  color:#052013;
  box-shadow: 0 18px 30px rgba(25,195,125,.25);
}

#noBtn{
  background:linear-gradient(180deg,#ff6b86,var(--no));
  color:#2b0010;
  position:absolute;
  left:12px;
  top:10px;
  user-select:none;
  touch-action:none;
  box-shadow: 0 18px 30px rgba(255,77,109,.22);
}

/* Celebration overlay */
.celebrate{
  position:fixed;
  inset:0;
  display:none;
  background:rgba(0,0,0,.78);
  z-index:5;
}
.celebrate.on{display:block}
.bigMsg{
  font-size:clamp(26px,7vw,48px);
  font-weight:1000;
  text-align:center;
  margin-top:30vh;
  direction:rtl;
}
.smallHint{
  margin-top:10px;
  text-align:center;
  opacity:.85;
  font-weight:700;
}
</style>
</head>

<body>

<!-- AUDIO: upload your mp3 to repo as valentine.mp3 -->
<audio id="bgMusic" preload="auto">
  <source src="valentine.mp3" type="audio/mpeg">
</audio>

<div class="hearts" id="hearts"></div>

<div class="wrap">
  <div class="card">
    <h1 class="title">ÙØ§Ø·Ù…Ù‡ ÙˆÙ„Ù†ØªØ§ÛŒÙ† Ù…Ù† Ù…ÛŒØ´ÛŒâ€ŒØŸ</h1>
    <p class="sub">ÙÙ‚Ø· ÛŒÙ‡ Ú¯Ø²ÛŒÙ†Ù‡ Ø¯Ø±Ø³Øª ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡ ğŸ˜Œ</p>

    <div class="photoWrap">
      <img class="photo" src="whiteboard_enhanced.jpg" alt="whiteboard">
    </div>

    <div class="btnRow" id="btnArea">
      <button id="yesBtn">Ø¢Ø±Ù‡</button>
      <button id="noBtn" aria-disabled="true">Ù†Ù‡</button>
    </div>
  </div>
</div>

<div class="celebrate" id="celebrate">
  <div class="bigMsg">Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ø³ØªÙ… Ø¯ÙˆØ³ØªÙ… Ø¯Ø§Ø±ÛŒ ğŸ’–</div>
  <div class="smallHint">ğŸ¶ Ø¢Ù‡Ù†Ú¯ Ø±ÙˆØ´Ù† Ø´Ø¯</div>
</div>

<script>
// Floating hearts
const heartsEl = document.getElementById("hearts");
function spawnHeart(){
  const h=document.createElement("div");
  h.className="heart";
  h.textContent="ğŸ¤";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=6+Math.random()*4+"s";
  heartsEl.appendChild(h);
  setTimeout(()=>h.remove(),10000);
}
setInterval(spawnHeart,250);

// NO button fix (always moves)
const noBtn=document.getElementById("noBtn");
const btnArea=document.getElementById("btnArea");

function moveNoButton(pointerX,pointerY){
  const area=btnArea.getBoundingClientRect();
  const btn=noBtn.getBoundingClientRect();

  const padding=6;
  const maxX=area.width-btn.width-padding;
  const maxY=area.height-btn.height-padding;

  let x=Math.random()*maxX+padding;
  let y=Math.random()*maxY+padding;

  // ensure no conflicts
  noBtn.style.right="auto";
  noBtn.style.bottom="auto";
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
}

// Block any click on NO
["click","pointerdown","mousedown","touchstart"].forEach(evt=>{
  noBtn.addEventListener(evt,e=>{
    e.preventDefault();
    e.stopPropagation();
  }, {passive:false});
});

// Desktop proximity dodge
btnArea.addEventListener("pointermove",e=>{
  const b=noBtn.getBoundingClientRect();
  const dx=e.clientX-(b.left+b.width/2);
  const dy=e.clientY-(b.top+b.height/2);
  if(Math.hypot(dx,dy)<120) moveNoButton(e.clientX,e.clientY);
});

// Mobile finger drag dodge
btnArea.addEventListener("touchmove",e=>{
  const t=e.touches[0];
  if(!t) return;
  const b=noBtn.getBoundingClientRect();
  const dx=t.clientX-(b.left+b.width/2);
  const dy=t.clientY-(b.top+b.height/2);
  if(Math.hypot(dx,dy)<160) moveNoButton(t.clientX,t.clientY);
},{passive:true});

// Make it move at load
window.addEventListener("load",()=>{
  moveNoButton();
  setTimeout(()=>moveNoButton(),200);
});

// YES: show overlay + play music (allowed because user clicked)
const music = document.getElementById("bgMusic");
document.getElementById("yesBtn").addEventListener("click", async ()=>{
  document.getElementById("celebrate").classList.add("on");

  try{
    music.volume = 0.9;     // adjust as you like
    music.loop = true;      // keep playing
    await music.play();
  }catch(err){
    // If browser blocks for some reason, show a tiny hint
    console.log("Audio play blocked:", err);
    alert("Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ Ø¢Ù‡Ù†Ú¯ØŒ ÛŒÚ© Ø¨Ø§Ø± Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ø¨Ø²Ù† ğŸ™‚");
  }
});
</script>

</body>
</html>
